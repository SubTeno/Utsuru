<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
>
  <h:head>
    <title>${anime.title_eng}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="/resources/CSS/header.css" />
    <link rel="stylesheet" href="/resources/CSS/anime.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </h:head>

  <h:body>
    <!-- Header -->
    <ui:include src="/resources/Template/header.xhtml" />
    <!-- Content -->
    <div class="content">
      <div class="top">
        <!-- Left Content (Information) -->
        <div class="topleft">
          <img src="${anime.img_url}" />
          <div class="info">
            <p2>Information</p2>
            <p3
              >Score :
              <i class="bi bi-star text-warning"></i>
              ${anime.score}<br />Episodes : ${anime.eps}<br />Rank :
              ${anime.rank}<br />Rating : ${anime.rating}<br />Status :
              ${anime.status}</p3
            >
          </div>
        </div>
        <!-- Right Content (Synopsis, Favourite button, Trailer) -->
        <div class="topright">
          <p class="titlejp">${anime.title_jp}</p>
          <p5>${anime.title_eng}</p5>
          <p1 class="synopsis">${anime.desc}</p1>
          <iframe src="${anime.trailer_url}"></iframe>
          <div class="favourite">
            <c:set var="var" value="${anime.ifFavourite(anime.aniID)}" />
            <c:choose>
              <!-- If yet fav -->
              <c:when test="${var == 3}">
                <h:form>
                  <h:commandLink action="${edit.add()}">
                    <button type="button" class="btn btn-primary">
                      <i class="bi bi-star-fill"></i>Favourite
                    </button>
                  </h:commandLink>
                </h:form>
              </c:when>
              <!-- If already fav -->
              <c:when test="${var == 2}">
                <h:form>
                  <h:commandLink
                    action="${edit.delete(anime.currentUserReview.ID)}"
                  >
                    <button type="button" class="btn btn-danger">
                      <i class="bi bi-star-fill"></i>Un-Favourite
                    </button>
                  </h:commandLink>
                </h:form>
              </c:when>
              <!--  -->
            </c:choose>
          </div>
        </div>
        <!--  -->
      </div>
    </div>

    <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </h:body>
</html>
